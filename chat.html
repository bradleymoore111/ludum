<html>
<html>
<head>
</head>
<body>
	<p>Name</p>
	<input type="text" id="name">
	<input type="button" id="namer" value="name" onclick="updateName()">
	<p id="namez"></p>

	<br>
	<p>Data</p>
	<input type="text" id="chatbox">
	<input type="button" id="clickme" onclick="submitStuff()" value="CLICKME">

	<br><br>
	<p>Clear chat log</p>
	<input type="button" onclick="clearChat()" value="Clear chat">
	<p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
	<div id="log">
	
	</div>
	<script src="https://cdn.firebase.com/js/client/2.0.6/firebase.js"></script>
	<script id="load">
		var fb = new Firebase("https://chat-test-god-dammit.firebaseio.com");
		var name = "NOT YET MADE";

		var data;
		fb.on("value",function(snapshot) {
		  data = snapshot.val();
		});
		fb.on("child_added",function(snapshot) {
		  data = snapshot.val();
		});
		fb.on("child_changed",function(snapshot) {
		  data = snapshot.val();
		});

		function submitStuff(){
			var value = document.getElementById("chatbox").value;
			fb.push((name=="NOT YET MADE"||name==""?"anonymous":name)+": "+value);
			onUpdate(data);
		}
		function onUpdate(stuff){
			document.getElementById("log").innerHTML="";
			for(key in stuff){
				var idk = document.createElement("p");
				idk.innerText = stuff[key];
				document.getElementById("log").appendChild(idk);
			}
		}
		function updateName(){
			box = document.getElementById("name");
			name = box.value;
			showName();
		}
		function showName(){
			box = document.getElementById("namez");
			box.innerText = "Your current name is "+name;
		}
		function clearChat(){
			fb.remove();
		}

		showName()
		setInterval(function(){onUpdate(data)},500);
	</script>
</body>
</html>